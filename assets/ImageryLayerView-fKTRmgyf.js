import{E as r,F as n,d5 as g,H as E,s as c,dh as x,aL as b,bA as y}from"./index-e4odrhqs.js";const T=d=>{let e=class extends d{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,p){const{layer:o}=this;if(!t)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o});const{popupEnabled:u}=o,a=x(o,p);if(!u||a==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const m=await a.getRequiredFields(),s=new b;s.timeExtent=this.timeExtent,s.geometry=t,s.outFields=m,s.outSpatialReference=t.spatialReference;const{resolution:i,spatialReference:l}=this.view,w=this.view.type==="2d"?new y(i,i,l):new y(.5*i,.5*i,l),{returnTopmostRaster:h,showNoDataRecords:R}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},v={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:w,showNoDataRecords:R,signal:p!=null?p.signal:null};return o.queryVisibleRasters(s,v).then(f=>f)}canResume(){var t;return!!super.canResume()&&!((t=this.timeExtent)!=null&&t.isEmpty)}};return r([n()],e.prototype,"layer",void 0),r([n()],e.prototype,"suspended",void 0),r([n(g)],e.prototype,"timeExtent",void 0),r([n()],e.prototype,"view",void 0),e=r([E("esri.views.layers.ImageryLayerView")],e),e};export{T as n};
